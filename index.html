<!DOCTYPE html>
<html>
  <head> 
	<script type="text/javascript">

        function to_rad(deg){
            return deg*Math.PI/180
        }
        
        function solve_haversine(angle_rad){
            return Math.pow(Math.sin(angle_rad/2),2)
        }
        
        function solve_distance(lat_1_rad, lon_1_rad, lat_2_rad, lon_2_rad){
            var earth_rad_km = 6371
            var hav_lat = solve_haversine(lat_2_rad-lat_1_rad)
            var hav_lon = solve_haversine(lon_2_rad-lon_1_rad)
            return 2*earth_rad_km*Math.asin(Math.sqrt(hav_lat+Math.cos(lat_1_rad)*Math.cos(lat_2_rad)*hav_lon))
        }

        function solve_dec() {
            calc_coord_dec("lat")
            calc_coord_dec_dir("lat", "N", "S")
            calc_coord_dec("lon")
            calc_coord_dec_dir("lon", "E", "W")            
            to_wkt();
            to_geojson();   
        }
        
        function calc_coord_dec(coord) {
			var coord_deg = document.getElementById(coord+"_deg").value;
            var coord_min = document.getElementById(coord+"_min").value;
            var coord_sec = document.getElementById(coord+"_sec").value;
            var coord_dec = coord_deg.toString() + '+' + coord_min.toString() + '/60+' + coord_sec.toString() + '/3600';
            document.getElementById(coord+"_dec").value = eval(coord_dec).toFixed(8);        
        }
        
        function calc_coord_dec_dir(coord, dir_1, dir_2) {
            var coord_dir = document.getElementById(coord+"_dms_dir").value.toUpperCase();
            if(coord_dir == dir_1 || coord_dir == dir_2){
                document.getElementById(coord+"_dec_dir").value = coord_dir;
            } else {
                document.getElementById(coord+"_dec_dir").value = "";
            }
        }
        
        function solve_dms() {
            calc_coord_dms("lat");
            calc_coord_dms_dir("lat", "N", "S")
            calc_coord_dms("lon");
            calc_coord_dms_dir("lon", "E", "W")
        }
        
        function calc_coord_dms(coord) {
            var coord_dec = document.getElementById(coord+"_dec").value;
            var coord_deg = Math.floor(coord_dec).toString();
            var coord_min_sec = eval('(' + coord_dec + '-' + coord_deg + ')*60');
            var coord_min = Math.floor(coord_min_sec).toString();
            var coord_sec = eval('(' + coord_min_sec + '-' + coord_min + ')*60');
            document.getElementById(coord+"_deg").value = coord_deg;
            document.getElementById(coord+"_min").value = coord_min;
            document.getElementById(coord+"_sec").value = coord_sec.toFixed(3);
        }
        
        function calc_coord_dms_dir(coord, dir_1, dir_2) {
            var coord_dir = document.getElementById(coord+"_dec_dir").value.toUpperCase();
            if(coord_dir == dir_1 || coord_dir == dir_2){
            document.getElementById(coord+"_dms_dir").value = coord_dir;
            } else {
            document.getElementById(coord+"_dms_dir").value = "";
            }
        }
        
        function to_wkt(){
            var lat_dec = get_dec_w_dir("lat","S");
            var lon_dec = get_dec_w_dir("lon","W");
            
            document.getElementById("wkt_out").value = "POINT(" + lon_dec +" "+ lat_dec +")";
        }

        function to_geojson() {
            var geojson = {
                "type":"FeatureCollection",
                "features":[{
                "type":"Feature",
                "geometry":{
                "type":"Point",
                "coordinates":[]
                },
                "properties":null
                }]
            };

            var lat_dec = get_dec_w_dir("lat","S");
            var lon_dec = get_dec_w_dir("lon","W");
            
            geojson.features[0].geometry.coordinates = [lon_dec, lat_dec];
        
            document.getElementById("geojson_out").value = JSON.stringify(geojson);
        }

        function get_dec_w_dir(coord, neg_dir) {
            var dec_val = document.getElementById(coord + "_dec").value;
            var dec_dir = document.getElementById(coord + "_dec_dir").value.toUpperCase();
            if(dec_dir == neg_dir){
                dec_val *= -1;
            } else {
                dec_val *= 1;
            }        
            return dec_val
        }
       
        
	</script> 
</head> 
<!-- create table -->
<body> 

    <div class = title >Lat Long Converter</div> 

    <table border="1" style="width: 50%"> 
        <colgroup>
            <col span="1" style="width: 25%;">
            <col span="1" style="width: 25%;">
            <col span="1" style="width: 25%;">
            <col span="1" style="width: 25%;">
        </colgroup>
        
        <tr> 
            <td>Latitude</td>
	    <td>Degree</td> 
	    <td>Minute</td> 
	    <td>Second</td>
	</tr> 
        <tr> 
            <td><select name="lat_dms_dir" id="lat_dms_dir">
                <option value="N">N</option>
                <option value="S">S</option>
            </select></td>
            <td><input type="number" name="lat_deg" id="lat_deg" value="0" min="0" step="1"/> </td> 
            <td><input type="number" name="lat_min" id="lat_min" value="0" min="0" step="1"/> </td> 
            <td><input type="number" name="lat_sec" id="lat_sec" value="0.000" min="0" step="0.001"/> </td> 
        </tr> 
        <tr></tr>
	<tr> 
        	<td>Longitude</td>
		<td>Degree</td> 
		<td>Minute</td> 
		<td>Second</td> 
	</tr> 
        <tr> 
            <td><select name="lon_dms_dir" id="lon_dms_dir">
                <option value="E">E</option>
                <option value="W">W</option>
            </select></td>
            <td><input type="number" name="lon_deg" id="lon_deg" value="0" min="0" step="1"/> </td> 
            <td><input type="number" name="lon_min" id="lon_min" value="0" min="0" step="1"/> </td> 
            <td><input type="number" name="lon_sec" id="lon_sec" value="0.000" min="0" step="0.001"/> </td> 
        </tr>
        <tr></tr>
	<tr> 
        	<td colspan="2"><input type="button" value="DMS to Dec" onclick="solve_dec()"/></td>
        	<td colspan="2"><input type="button" value="Dec to DMS" onclick="solve_dms()"/></td>
        </tr> 
        <tr></tr>
        <tr> 
            <td>Latitude</td>
	    <td colspan="3">Decimal</td> 
	</tr> 
        <tr> 
            <td><select name="lat_dec_dir" id="lat_dec_dir">
                <option value="N">N</option>
                <option value="S">S</option>
            </select></td>
            <td colspan="3"><input type="number" name="lat_dec" id="lat_dec" value="0.00000000" min="0.00000000" step="0.00000001"/></td>
        </tr>
        <tr> 
            <td>Longitude</td>
	    <td colspan="3">Decimal</td> 
	</tr> 
        <tr> 
            <td><select name="lon_dec_dir" id="lon_dec_dir">
                <option value="E">E</option>
                <option value="W">W</option>
            </select></td>
            <td colspan="3"><input type="number" name="lon_dec" id="lon_dec" value="0.00000000" min="0.00000000" step="0.00000001"/></td>
        </tr>
        <tr> 
            <td>Well Known Text (WKT)</td>
	    <td colspan="3"><input type="text" name="wkt_out" id="wkt_out"/></td> 
		</tr> 
        <tr> 
            <td>GeoJSON</td>
	    <td colspan="3"><input type="text" name="geojson_out" id="geojson_out"/></td> 
	</tr> 
	</table> 
</body> 

</html>


